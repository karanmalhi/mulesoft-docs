= Secure Data Gateway

[CAUTION]
====
Secure Data Gateway is no longer included by default in CloudHub plans.

For all customers connecting to their own data centers, link:/docs/display/current/Virtual+Private+Cloud[Virtual Private Cloud] is our recommended solution. If you believe you need Secure Data Gateway, please contact your account executive.
====

The CloudHub Secure Data Gateway (SDG) Client provides a secure data link between your CloudHub application and enterprise data sources. Any private services or data sources behind an enterprise firewall can be made available to your CloudHub application by using the SDG client.

*Contents:*

link:#SecureDataGateway-InstallingtheSecureDataGateway[Installing the Secure Data Gateway]

* link:#SecureDataGateway-PrerequisiteJDK[Prerequisite JDK]
* link:#SecureDataGateway-DownloadtheSDGClient[Download the SDG Client]
* link:#SecureDataGateway-ConfiguretheSDGClient[Configure the SDG Client]
* link:#SecureDataGateway-SetupSDGMappings[Set up SDG Mappings]
* link:#SecureDataGateway-LaunchtheSDGClient[Launch the SDG Client]

link:#SecureDataGateway-ManagingandMonitoring[Managing and Monitoring]

== Installing the Secure Data Gateway

The SDG Client is distributed as a zip file that you need to save and expand on a system within the private network (including the same machine where your data sources are running). Once launched, the SDG provides connectivity to your private data sources. This means that the SDG system must have the authority to connect to, and perform the desired operations on, these private data sources.

image:/docs/download/attachments/122752496/modif-ion_sdg.jpg?version=1&modificationDate=1414509267334[image]

To set up the SDG Client, you need to:

* link:#SecureDataGateway-PrerequisiteJDK/JRE[Prerequisite JDK]
* link:#SecureDataGateway-DownloadtheSDGClient[Download the SDG Client]
* link:#SecureDataGateway-ConfiguretheSDGClient[Configure the SDG Client]
* link:#SecureDataGateway-SetupSDGMappings[Set up SDG Mappings]
* link:#SecureDataGateway-LaunchtheSDGClient[Launch the SDG Client]

=== Prerequisite JDK

* SDG is a Java application, in order to run it you'll to have a Java JDK installed. One way to check if you have Java installed is to run "java --version" on the command line.
* If you find our that you need to install Java, please download the appropriate version from: http://www.java.com/en/download/manual.jsp and follow the instructions for installation.

=== Download the SDG Client

[width="99a",cols="33a,33a,33a",options="header"]
|===
|link:/docs/download/attachments/122752496/sdg-client-1.0.10.zip?version=1&modificationDate=1414536766732[sdg-client-1.0.10.zip] |MD5: 6e6311d17a863d0162c12b1df36c98cd |Updated: 28 Oct 2014
|===

* Download the SDG Client zip file from the link above.
* Confirm MD5 checksum matches what's specified above.
* Copy the zip file to the SDG server (that is, the system where the SDG client application will run).
* Expand the SDG zip file to your SDG system.

=== Configure the SDG Client

On the SDG server, navigate to the sdg-client directory (that is, where you expanded the SDG client zip file as explained in link:#SecureDataGateway-DownloadtheSDGClient[Download the SDG Client]). Then edit the conf/config.xml file. This file contains the configuration parameters used to connect to CloudHub and to obtain information about your running CloudHub applications.

The following examples assume that the cloudhub-sdg-client directory is in /opt/ion-sdg-client-version.

[source]
----
$ unzip sdg-client-version.zip
----

Enter you application domain names:

[source]
----
<domains>myapp1,myapp2</domains>
----

[WARNING]
====
The domains element should contain a comma separated list of the short unqualified domain names of the applications that need to make use of the SDG.
====

Enter your CloudHub username and password:

[source]
----
<username>your.username</username>
<password>your.password</password>
----

By default, the SDG client tunnels socket connections via SSH over HTTP. If the network where the SDG is running supports outbound SSH traffic, SSH can be used by the SDG directly. To disable the use of HTTP tunneling:

The domains parameter in the conf/config.xml file identifies the applications that will be auto-detected by the Secure Data Gateway when the applications are running. The mappings in the mappings.xml file are used to establish secure tunnels with the workers for the domains.

=== Set up SDG Mappings

The SDG client works by securely mapping network ports from your CloudHub application worker to hosts/ports in your private network. These mappings are read from the conf/mappings.xml file by the SDG Client when it discovers your CloudHub application.

The default mappings.xml file that comes with the download looks something like this:

This configuration maps port 10000 on the mydomain application worker to port 3306 on the SDG Client system. That is, if a MySQL database is running on port 3306 of the client system, a JDBC connector running on CloudHub could refer to localhost:10000 and interact with the MySQL database on the SDG Client system.

There is no reason the data sources need to run on the SDG Client, and there are no limits to the number of mappings supported.

[WARNING]
====
It is important to pay attention to the domain element for each mapping, especially when mapping ports for multiple application domains. The domain element should map to one of the domains specified in the domains element of the config.xml file.
====

=== Launch the SDG Client

Navigate to the cloudhub-sdg-client directory and execute the invoke script that matches your operating system.

The following examples assume that the cloudhub-sdg-client directory is in /opt/ion-sdg-client-1.0

On Linux or Mac OS X:

[source]
----
$ cd /opt/sdg-client-1.0
$ ./bin/sdg.sh
----

On Windows:

[source]
----
$ cd sdg-client-1.0/bin
$ sdg.bat
----

When this script launches, it reads the configuration data from conf/config.xml and connects to CloudHub. It receives information that it uses to establish secure connections directly to your running CloudHub applications. Periodic polling enables the SDG client to adapt to changes in the location and number of applications you have running on CloudHub.

Example output:

[source]
----
----

== Managing and Monitoring

image:/docs/download/attachments/122752496/sdg+-+connected.png?version=1&modificationDate=1332915305691[image] The status of the SDG can be seen on the application dashboard. When it's connected, you'll see the a green icon, when it was started, and when it was last seen. Additionally, you can receive email alerts whenever the SDG connects and disconnects, allowing you to quickly fix anything if it goes wrong with your installation. For more information, see link:/docs/display/current/Alerts+and+Notifications[Alerts and Notifications].
